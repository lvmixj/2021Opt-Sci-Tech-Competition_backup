# 2021Opt-Sci-Tech-Competition_backup
2021光电设计竞赛代码备份.

![917842786CB4DDDB5AAFFC9DD04B5583](https://user-images.githubusercontent.com/57294382/129131866-fa9deb1a-8189-4810-ab8b-74b768abbde5.jpg)

![2A8E9BAAD536EFC78AC814C78176200A](https://user-images.githubusercontent.com/57294382/129131875-41fa29c3-28b5-4d4a-bdef-edfa39519ac9.jpg)

虽然成绩很不咋样，但是，记录一下，备份一下啊。连续熬夜几个晚上，花销不菲，学了些东西，啥也不会，写了千行代码，也是一段值得回忆的经历吧。
系统以树莓派为控制器和数据处理中心,STM32控制机械臂,利用四个自由度的机械臂进行垃圾的框取,Arduino加上扩展板控制四个TB520减速电机,每个减速电机连接麦克纳姆轮,实现全方位移动,k210和树莓派摄像头进行图像处理,分类识别垃圾和识别颜色,三个超声波模块提供小车当前的位置信息.

图像处理以深度学习为基础,通过对垃圾拍照分类,经过软件训练后,将数据导入到K210模块,进行垃圾识别.树莓派上的图像识别使用基于TensorFlow的YOLOV3算法,通过对垃圾拍照标注进行分类,经过软件训练后,将数据导入树莓派.

颜色识别通过对黄色,黑色,蓝色,绿色,红色,灰色的图片样本进行框选ROI区域,再统计框选区域的HSV颜色统计谱图,以此得到HSV的大致范围,最后通过HSV颜色阈值动态调节工具,调节出颜色对应的最佳HSV阈值.通过不同的阈值,进行腐蚀膨胀等操作,即可识别不同的颜色.

空间定位系统是根据直角坐标系原理,以场地左下角为原点,摄像头方向为y轴方向,顺时针旋转90°为x轴.采用前面,左边,右边三个超声波进行定位,为了使测量更加精确,每20次测量的距离众数作为测量结果.当出现与上一次误差较大或者无返回数据,使用轮子滚动距离与颜色识别来进行辅助定位.最后根据设定的坐标即可达到设定的任意点.

树莓派通过串口连接STM32和K210,控制机械臂的放下与收起,接收k210的图像识别数据.

本车移动采用麦克纳姆轮,其结构可以实现全方位移动，这种全方位移动方式是基于一个有许多位于机轮周边的轮轴的中心轮的原理上，这些成角度的周边轮轴把一部分的机轮转向力转化到一个机轮法向力上面。依靠各自机轮的方向和速度，这些力的最终合成在任何要求的方向上产生一个合力矢量从而保证了这个平台在最终的合力矢
量的方向上能自由地移动，而不改变机轮自身的方向。在它的轮缘上斜向分布着许多小滚子，故轮子可以横向滑移。小滚子的母线很特殊，当轮子绕着固定的轮心轴转动时，各个小滚子的包络线为圆柱面，所以该轮能够连续地向前滚动。麦克纳姆轮结构紧凑，运动灵活，是很成功的一种全方位轮。有4个这种新型轮子进行组合，可以
更灵活方便的实现全方位移动功能。

本车麦克纳姆轮采用铝合金材料,保证在较大压力下轮子不变形,实现精确移动,车底座采用两块3mm厚的铝合金底板,保证了结构的牢固,在对抗中有较大的优势。

相关视频:

介绍:

https://www.bilibili.com/video/BV11V411H7YA?share_source=copy_web

https://www.bilibili.com/video/BV1jv411n7iL

https://www.bilibili.com/video/BV17M4y1K7hA

https://www.bilibili.com/video/BV1gv411E7FG

比赛实拍(不是我的啊):

https://www.bilibili.com/video/BV11V411H7YA?share_source=copy_web

K210

https://www.bilibili.com/video/BV1fZ4y1T7Hh

https://www.bilibili.com/video/BV1c54y1n7ur?share_source=copy_web


